# C++20 CMake VS Code Boilerplate

A minimal boilerplate for C++20 projects using CMake and Visual Studio Code, designed for seamless cross-platform development between Windows and Linux. This boilerplate is pre-configured for the Microsoft C/C++ and CMake Tools extensions.

## Cross-Platform Development

This project is configured to use the native toolchains on both Windows and Linux, allowing you to switch between environments with minimal friction.

### Windows Environment

-   **Compiler**: Microsoft Visual C++ (MSVC) compiler (`cl.exe`).
-   **Debugger**: Microsoft Visual Studio Debugger.
-   **Generator**: Visual Studio.

The configuration for Windows is handled by the `windows-debug` and `windows-release` presets in `CMakePresets.json`.

### Linux Environment

-   **Compiler**: Clang is the preferred compiler. The presets are configured to use `clang` and `clang++`.
-   **Debugger**: LLDB, integrated via the [CodeLLDB extension](https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb).
-   **Generator**: Ninja.

The configuration for Linux is handled by the `linux-debug` and `linux-release` presets in `CMakePresets.json`.

## Prerequisites

-   **Windows**:
    -   Visual Studio 2022 with the "Desktop development with C++" workload.
    -   CMake (usually included with Visual Studio).
-   **Linux**:
    -   Clang and LLDB (`sudo apt-get install clang lldb`).
    -   CMake (`sudo apt-get install cmake`).
    -   Ninja (`sudo apt-get install ninja-build`).
-   **Visual Studio Code** with the following extensions:
    -   [C/C++ Extension Pack](https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools-extension-pack)
    -   [CMake Tools](https://marketplace.visualstudio.com/items?itemName=ms-vscode.cmake-tools)
    -   [CodeLLDB](https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb) (for Linux debugging)

## Getting Started

1.  **Open the project in VS Code.**
2.  **Select a Preset**: The first time you open the project, the CMake Tools extension may prompt you to select a preset. If not, use the Command Palette (`Ctrl+Shift+P`) to run `CMake: Select a configure preset` and choose the appropriate configuration for your OS (e.g., `Windows Debug` or `Linux Debug`).
3.  **Build**: The project will configure and build automatically. You can also manually build by running `CMake: Build` from the Command Palette.
4.  **Run/Debug**:
    -   Navigate to the "Run and Debug" view in the VS Code sidebar.
    -   From the dropdown menu at the top, select the correct launch configuration for your operating system: `Debug Windows (MSVC)` or `Debug Linux (Clang/LLDB)`.
    -   **Important**: Ensure that your active CMake preset is a **debug** preset (e.g., `windows-debug` or `linux-debug`). The debugger relies on the debug symbols generated by a debug build.
    -   Press F5 to start debugging.

## Switching Between Environments

When you switch from one OS to another (e.g., from Windows to a WSL terminal), follow these steps to ensure a clean transition:

1.  **Clean the Build Directory**: It's good practice to clean the build artifacts from the previous environment. You can do this by running the `CMake: Clean` command from the Command Palette, or by manually deleting the `build` directory.
2.  **Select the Correct Preset**: Use `CMake: Select a configure preset` to choose the preset for your current OS.
3.  **Rebuild**: Run `CMake: Build` to build the project with the new toolchain.
4.  **Debug**: Select the corresponding debug configuration and start debugging.

## Project Structure

```
.
├── CMakeLists.txt      # Defines the CMake project and executable.
├── CMakePresets.json   # Configure, build, and test presets for VS Code.
├── main.cpp            # Example source file.
└── .vscode/
    ├── launch.json     # Debug configurations for Windows and Linux.
    ├── settings.json   # Recommended VS Code settings.
    └── tasks.json      # Build and clean tasks.
```
